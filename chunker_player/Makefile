include ../common.mak

#SDL config here
#LOCAL_SDL_CPPFLAGS = $(shell $(LOCAL_ABS_SDL)/bin/sdl-config --cflags;)
#LOCAL_SDL_LDFLAGS = $(shell $(LOCAL_ABS_SDL)/bin/sdl-config --static-libs;)
LOCAL_SDL_CPPFLAGS = -I$(LOCAL_ABS_SDL)/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT
#LOCAL_SDL_LDFLAGS = -L$(LOCAL_ABS_SDL)/lib -Wl,-rpath,$(LOCAL_ABS_SDL)/lib
LOCAL_SDL_LDFLAGS = -Wl,-rpath,$(LOCAL_ABS_SDL)/lib
LOCAL_SDL_LDLIBS = $(LOCAL_ABS_SDL)/lib/libSDL.a -ldl

LOCAL_SDLIMAGE_CPPFLAGS = -I$(LOCAL_SDLIMAGE)/include/SDL
#LOCAL_SDLIMAGE_LDFLAGS = -L$(LOCAL_SDLIMAGE)/lib
LOCAL_SDLIMAGE_LDLIBS = $(LOCAL_SDLIMAGE)/lib/libSDL_image.a

#LOCAL_FREETYPE_CPPFLAGS = $(shell $(LOCAL_FREETYPE)/bin/freetype-config --cflags;)
#LOCAL_FREETYPE_LDFLAGS = $(shell $(LOCAL_FREETYPE)/bin/freetype-config --libs;)
LOCAL_FREETYPE_CPPFLAGS = -I$(LOCAL_FREETYPE)/include/ -I$(LOCAL_FREETYPE)/include/freetype2
#LOCAL_FREETYPE_LDFLAGS = -L$(LOCAL_FREETYPE)/lib -Wl,--rpath -Wl,$(LOCAL_FREETYPE)/lib
LOCAL_FREETYPE_LDFLAGS = -Wl,--rpath -Wl,$(LOCAL_FREETYPE)/lib
LOCAL_FREETYPE_LDLIBS = $(LOCAL_FREETYPE)/lib/libfreetype.a

LOCAL_SDLTTF_CPPFLAGS = -I$(LOCAL_SDLTTF)/include/SDL
#LOCAL_SDLTTF_LDFLAGS = -L$(LOCAL_SDLTTF)/lib
LOCAL_SDLTTF_LDLIBS = $(LOCAL_SDLTTF)/lib/libSDL_ttf.a

#microhttpd config here
#LOCAL_MHD_CPPFLAGS = -I$(LOCAL_MHD) -I$(LOCAL_MHD)/src/daemon -I$(LOCAL_MHD)/src/include
#LOCAL_MHD_LDFLAGS = -L$(LOCAL_MHD)/src/daemon
#LOCAL_MHD_LDLIBS = -lmicrohttpd
#LOCAL_MHD_LDLIBS = $(LOCAL_MHD)/src/daemon/.libs/libmicrohttpd.a
LOCAL_MHD_CPPFLAGS = -I$(LOCAL_MHD)/include
#LOCAL_MHD_LDFLAGS = -L$(LOCAL_MHD)/lib
LOCAL_MHD_LDLIBS = $(LOCAL_MHD)/lib/libmicrohttpd.a

LOCAL_CONFUSE_CPPFLAGS = -I$(LOCAL_CONFUSE)/include
LOCAL_CONFUSE_LDLIBS = $(LOCAL_CONFUSE)/lib/libconfuse.a

#put them in the correct order
CPPFLAGS += $(LOCAL_SDLTTF_CPPFLAGS) $(LOCAL_SDLIMAGE_CPPFLAGS) $(LOCAL_SDL_CPPFLAGS)
CPPFLAGS += $(LOCAL_MHD_CPPFLAGS) $(LOCAL_CONFUSE_CPPFLAGS) $(LOCAL_FREETYPE_CPPFLAGS)
CPPFLAGS += $(LOCAL_FFMPEG_CPPFLAGS) $(LOCAL_COMMON_CPPFLAGS)

LDFLAGS += $(LOCAL_SDLTTF_LDFLAGS) $(LOCAL_SDLIMAGE_LDFLAGS) $(LOCAL_SDL_LDFLAGS)
LDFLAGS += $(LOCAL_MHD_LDFLAGS) $(LOCAL_CONFUSE_LDFLAGS) $(LOCAL_FREETYPE_LDFLAGS)
LDFLAGS += $(LOCAL_FFMPEG_LDFLAGS) $(LOCAL_COMMON_LDFLAGS)

LDLIBS += $(LOCAL_SDLTTF_LDLIBS) $(LOCAL_SDLIMAGE_LDLIBS) $(LOCAL_SDL_LDLIBS)
LDLIBS += $(LOCAL_MHD_LDLIBS) $(LOCAL_CONFUSE_LDLIBS) $(LOCAL_FREETYPE_LDLIBS)
LDLIBS += $(LOCAL_FFMPEG_LDLIBS) $(LOCAL_COMMON_LDLIBS)

LDLIBS += $(DYNAMIC_LDLIBS)

all: chunker_player

chunker_player: ../chunk_transcoding/external_chunk_transcoding.o chunk_puller.o chunker_player.o player_core.o player_gui.o

clean:
	rm -f chunker_player
	rm -f *.o
